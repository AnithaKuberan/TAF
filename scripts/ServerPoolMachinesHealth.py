servers = [
"10.1.5.23",
"10.1.5.24",
"10.1.5.25",
"172.23.104.100",
"172.23.104.103",
"172.23.104.104",
"172.23.104.105",
"172.23.104.106",
"172.23.104.107",
"172.23.104.109",
"172.23.104.110",
"172.23.104.158",
"172.23.104.172",
"172.23.104.173",
"172.23.104.174",
"172.23.104.175",
"172.23.104.186",
"172.23.104.199",
"172.23.104.20",
"172.23.104.200",
"172.23.104.201",
"172.23.104.202",
"172.23.104.203",
"172.23.104.208",
"172.23.104.211",
"172.23.104.216",
"172.23.104.217",
"172.23.104.219",
"172.23.104.220",
"172.23.104.221",
"172.23.104.222",
"172.23.104.223",
"172.23.104.224",
"172.23.104.225",
"172.23.104.226",
"172.23.104.228",
"172.23.104.229",
"172.23.104.231",
"172.23.104.234",
"172.23.104.235",
"172.23.104.236",
"172.23.104.237",
"172.23.104.238",
"172.23.104.241",
"172.23.104.242",
"172.23.104.243",
"172.23.104.244",
"172.23.104.245",
"172.23.104.246",
"172.23.104.247",
"172.23.104.248",
"172.23.104.249",
"172.23.104.250",
"172.23.104.251",
"172.23.104.252",
"172.23.104.253",
"172.23.104.255",
"172.23.104.30",
"172.23.104.73",
"172.23.104.76",
"172.23.104.80",
"172.23.104.86",
"172.23.104.90",
"172.23.104.91",
"172.23.104.92",
"172.23.104.97",
"172.23.104.98",
"172.23.104.99",
"172.23.105.0",
"172.23.105.1",
"172.23.105.10",
"172.23.105.102",
"172.23.105.103",
"172.23.105.105",
"172.23.105.106",
"172.23.105.109",
"172.23.105.114",
"172.23.105.122",
"172.23.105.123",
"172.23.105.124",
"172.23.105.126",
"172.23.105.128",
"172.23.105.130",
"172.23.105.137",
"172.23.105.138",
"172.23.105.145",
"172.23.105.152",
"172.23.105.155",
"172.23.105.159",
"172.23.105.161",
"172.23.105.163",
"172.23.105.171",
"172.23.105.173",
"172.23.105.183",
"172.23.105.185",
"172.23.105.188",
"172.23.105.19",
"172.23.105.190",
"172.23.105.191",
"172.23.105.192",
"172.23.105.195",
"172.23.105.197",
"172.23.105.199",
"172.23.105.2",
"172.23.105.20",
"172.23.105.200",
"172.23.105.201",
"172.23.105.202",
"172.23.105.204",
"172.23.105.205",
"172.23.105.206",
"172.23.105.208",
"172.23.105.209",
"172.23.105.210",
"172.23.105.211",
"172.23.105.212",
"172.23.105.213",
"172.23.105.214",
"172.23.105.215",
"172.23.105.217",
"172.23.105.218",
"172.23.105.219",
"172.23.105.220",
"172.23.105.221",
"172.23.105.223",
"172.23.105.225",
"172.23.105.226",
"172.23.105.227",
"172.23.105.229",
"172.23.105.230",
"172.23.105.232",
"172.23.105.233",
"172.23.105.234",
"172.23.105.235",
"172.23.105.236",
"172.23.105.237",
"172.23.105.238",
"172.23.105.24",
"172.23.105.240",
"172.23.105.242",
"172.23.105.243",
"172.23.105.244",
"172.23.105.245",
"172.23.105.246",
"172.23.105.247",
"172.23.105.249",
"172.23.105.25",
"172.23.105.250",
"172.23.105.251",
"172.23.105.252",
"172.23.105.253",
"172.23.105.254",
"172.23.105.255",
"172.23.105.26",
"172.23.105.27",
"172.23.105.3",
"172.23.105.30",
"172.23.105.31",
"172.23.105.32",
"172.23.105.33",
"172.23.105.34",
"172.23.105.35",
"172.23.105.4",
"172.23.105.41",
"172.23.105.42",
"172.23.105.44",
"172.23.105.45",
"172.23.105.46",
"172.23.105.47",
"172.23.105.49",
"172.23.105.5",
"172.23.105.50",
"172.23.105.51",
"172.23.105.52",
"172.23.105.53",
"172.23.105.55",
"172.23.105.56",
"172.23.105.59",
"172.23.105.64",
"172.23.105.67",
"172.23.105.70",
"172.23.105.71",
"172.23.105.72",
"172.23.105.75",
"172.23.105.76",
"172.23.105.79",
"172.23.105.8",
"172.23.105.80",
"172.23.105.81",
"172.23.105.82",
"172.23.105.84",
"172.23.105.85",
"172.23.105.86",
"172.23.105.87",
"172.23.105.88",
"172.23.105.9",
"172.23.105.90",
"172.23.105.91",
"172.23.105.93",
"172.23.105.94",
"172.23.105.96",
"172.23.105.97",
"172.23.105.99",
"172.23.106.0",
"172.23.106.1",
"172.23.106.10",
"172.23.106.107",
"172.23.106.108",
"172.23.106.11",
"172.23.106.110",
"172.23.106.111",
"172.23.106.116",
"172.23.106.118",
"172.23.106.13",
"172.23.106.131",
"172.23.106.133",
"172.23.106.140",
"172.23.106.141",
"172.23.106.142",
"172.23.106.147",
"172.23.106.15",
"172.23.106.16",
"172.23.106.167",
"172.23.106.17",
"172.23.106.170",
"172.23.106.18",
"172.23.106.19",
"172.23.106.2",
"172.23.106.20",
"172.23.106.202",
"172.23.106.204",
"172.23.106.208",
"172.23.106.209",
"172.23.106.221",
"172.23.106.228",
"172.23.106.234",
"172.23.106.235",
"172.23.106.237",
"172.23.106.24",
"172.23.106.244",
"172.23.106.247",
"172.23.106.248",
"172.23.106.249",
"172.23.106.25",
"172.23.106.250",
"172.23.106.26",
"172.23.106.27",
"172.23.106.29",
"172.23.106.3",
"172.23.106.30",
"172.23.106.31",
"172.23.106.32",
"172.23.106.33",
"172.23.106.34",
"172.23.106.35",
"172.23.106.36",
"172.23.106.37",
"172.23.106.38",
"172.23.106.39",
"172.23.106.4",
"172.23.106.40",
"172.23.106.41",
"172.23.106.42",
"172.23.106.43",
"172.23.106.44",
"172.23.106.45",
"172.23.106.47",
"172.23.106.48",
"172.23.106.49",
"172.23.106.50",
"172.23.106.51",
"172.23.106.6",
"172.23.106.66",
"172.23.106.70",
"172.23.106.72",
"172.23.106.8",
"172.23.106.85",
"172.23.106.9",
"172.23.106.90",
"172.23.107.100",
"172.23.107.105",
"172.23.107.107",
"172.23.107.109",
"172.23.107.113",
"172.23.107.114",
"172.23.107.125",
"172.23.107.130",
"172.23.107.134",
"172.23.107.135",
"172.23.107.138",
"172.23.107.145",
"172.23.107.165",
"172.23.107.169",
"172.23.107.171",
"172.23.107.18",
"172.23.107.187",
"172.23.107.194",
"172.23.107.196",
"172.23.107.198",
"172.23.107.201",
"172.23.107.205",
"172.23.107.206",
"172.23.107.207",
"172.23.107.218",
"172.23.107.232",
"172.23.107.234",
"172.23.107.29",
"172.23.107.30",
"172.23.107.38",
"172.23.107.53",
"172.23.107.55",
"172.23.107.56",
"172.23.107.67",
"172.23.107.7",
"172.23.107.78",
"172.23.108.109",
"172.23.108.16",
"172.23.108.162",
"172.23.108.164",
"172.23.108.169",
"172.23.108.17",
"172.23.108.170",
"172.23.108.208",
"172.23.108.210",
"172.23.108.211",
"172.23.108.212",
"172.23.108.213",
"172.23.108.227",
"172.23.108.228",
"172.23.108.229",
"172.23.108.236",
"172.23.108.237",
"172.23.108.238",
"172.23.108.239",
"172.23.108.240",
"172.23.108.241",
"172.23.108.46",
"172.23.108.91",
"172.23.109.109",
"172.23.109.152",
"172.23.109.153",
"172.23.109.251",
"172.23.109.38",
"172.23.109.39",
"172.23.109.40",
"172.23.109.49",
"172.23.109.54",
"172.23.109.67",
"172.23.109.69",
"172.23.109.70",
"172.23.109.71",
"172.23.109.72",
"172.23.109.73",
"172.23.109.8",
"172.23.109.9",
"172.23.109.93",
"172.23.109.94",
"172.23.109.95",
"172.23.109.96",
"172.23.120.148",
"172.23.120.150",
"172.23.120.162",
"172.23.120.164",
"172.23.120.167",
"172.23.120.177",
"172.23.120.178",
"172.23.120.182",
"172.23.120.185",
"172.23.120.188",
"172.23.120.19",
"172.23.120.192",
"172.23.120.196",
"172.23.120.201",
"172.23.120.205",
"172.23.120.206",
"172.23.120.232",
"172.23.120.235",
"172.23.120.240",
"172.23.120.245",
"172.23.120.249",
"172.23.120.32",
"172.23.120.66",
"172.23.120.86",
"172.23.121.10",
"172.23.121.141",
"172.23.121.17",
"172.23.121.178",
"172.23.121.18",
"172.23.121.19",
"172.23.121.22",
"172.23.121.239",
"172.23.121.24",
"172.23.121.26",
"172.23.121.27",
"172.23.121.30",
"172.23.121.42",
"172.23.121.44",
"172.23.121.45",
"172.23.121.48",
"172.23.122.155",
"172.23.122.157",
"172.23.122.201",
"172.23.96.146",
"172.23.97.218",
"172.23.97.219",
"172.23.97.220",
"172.23.97.221",
"172.23.97.222",
"172.23.97.223",
"172.23.97.224",
"172.23.97.225",
"172.23.97.226",
"172.23.97.227",
"172.23.97.228",
"172.23.97.229",
"172.23.97.230",
"172.23.97.58",
"172.23.97.59",
"172.23.97.60",
"172.23.97.61",
"172.23.97.62",
"172.23.97.63",
"172.23.97.64",
"172.23.97.65",
"172.23.97.66",
"172.23.97.67",
"172.23.97.82",
"172.23.97.83",
"172.23.97.84",
"172.23.97.85",
"172.23.97.86",
"172.23.97.87",
"172.23.97.88",
"172.23.97.89",
"172.23.97.90",
"172.23.97.91",
"172.23.97.92",
"172.23.97.93",
"172.23.98.11",
"172.23.98.12",
"172.23.98.13",
"172.23.98.14",
"172.23.98.15",
"172.23.98.150",
"172.23.98.151",
"172.23.98.16",
"172.23.98.164",
"172.23.98.165",
"172.23.98.168",
"172.23.98.17",
"172.23.98.18",
"172.23.98.19",
"172.23.98.195",
"172.23.98.196",
"172.23.98.20",
"172.23.98.209",
"172.23.98.21",
"172.23.98.213",
"172.23.98.214",
"172.23.98.215",
"172.23.98.79",
"172.23.98.80",
"172.23.98.81",
"172.23.98.82",
"172.23.98.83",
"172.23.99.128",
"172.23.99.253",
"172.23.99.63",
"172.23.99.93"]
from com.jcraft.jsch import JSchException, JSchAuthCancelException, \
                            JSchPartialAuthException, SftpException

from com.jcraft.jsch import JSch
from org.python.core.util import FileUtil

failed = []
i = 1
for index, server in enumerate(servers):
    jsch = JSch()
    session = jsch.getSession("root", server, 22)
    session.setPassword("couchbase")
    session.setConfig("StrictHostKeyChecking", "no")
    try:
        session.connect(5000)
    except JSchException:
        failed.append(server)
        continue
    try:
        _ssh_client = session.openChannel("exec")
        _ssh_client.setInputStream(None)
        _ssh_client.setErrStream(None)
    
        instream = _ssh_client.getInputStream()
        errstream = _ssh_client.getErrStream()
        _ssh_client.setCommand("free -m")
        _ssh_client.connect()
        output = []
        error = []
        fu = FileUtil.wrap(instream)
        for line in fu.readlines():
            output.append(line)
        fu.close()
    
        fu1 = FileUtil.wrap(errstream)
        for line in fu1.readlines():
            error.append(line)
        fu1.close()
        try:
            print "{}) {}:{}".format(i, server, output[1].split()[1])
        except:
            print output
        i += 1
#         print output
        _ssh_client.disconnect()
    #                 session.disconnect()
    except JSchException as e:
        print("JSch exception on %s: %s" % (ip, str(e)))
    
print failed