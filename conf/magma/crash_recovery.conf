magma.magma_crash_recovery.MagmaCrashTests:

    test_crash_magma_n_times,num_items=1000000,doc_size=1024,doc_size_random=True,num_crashes=50,sdk_timeout=60,GROUP=P0;kill

    # Graceful restart
    test_crash_during_ops,num_items=10000000,doc_size=1024,sdk_timeout=60,graceful=True,doc_ops=create,replicas=0,GROUP=P0;graceful
    test_crash_during_ops,num_items=20000000,doc_size=1024,sdk_timeout=60,graceful=True,doc_ops=update,replicas=0,GROUP=P0;graceful
    test_crash_during_ops,num_items=20000000,doc_size=1024,sdk_timeout=60,graceful=True,doc_ops=delete,replicas=0,GROUP=P0;graceful
    test_crash_during_ops,num_items=20000000,doc_size=1024,sdk_timeout=60,graceful=True,doc_ops=expiry,replicas=0,GROUP=P0;graceful
    test_crash_during_get_ops,num_items=7000000,sdk_timeout=60,deep_copy=True,graceful=True,read_thread_count=8,GROUP=P0;graceful
    test_crash_during_upserts_using_multithreads,num_items=7000000,sdk_timeout=60,graceful=True,read_thread_count=8,GROUP=P0;graceful

    test_crash_during_ops,num_items=10000000,doc_size=1024,sdk_timeout=60,graceful=True,doc_ops=create:update,replicas=0,GROUP=P1;graceful
    test_crash_during_ops,num_items=10000000,doc_size=1024,sdk_timeout=60,graceful=True,doc_ops=create:delete,replicas=0,GROUP=P1;graceful
    test_crash_during_ops,num_items=20000000,doc_size=1024,sdk_timeout=60,graceful=True,doc_ops=update:delete,replicas=0,GROUP=P1;graceful
    test_crash_during_ops,num_items=10000000,doc_size=1024,sdk_timeout=60,graceful=True,doc_ops=create:expiry,replicas=0,GROUP=P1;graceful
    test_crash_during_ops,num_items=20000000,doc_size=1024,sdk_timeout=60,graceful=True,doc_ops=update:expiry,replicas=0,GROUP=P1;graceful
    test_crash_during_ops,num_items=20000000,doc_size=1024,sdk_timeout=60,graceful=True,doc_ops=delete:expiry,replicas=0,GROUP=P1;graceful
    test_crash_during_multi_updates_of_single_doc,num_items=7000000,graceful=True,sdk_timeout=60,GROUP=P1;graceful

    test_crash_during_ops,num_items=30000000,doc_size=1024,sdk_timeout=60,graceful=True,doc_ops=create:update:delete,replicas=0,GROUP=P2;graceful
    test_crash_during_ops,num_items=30000000,doc_size=1024,sdk_timeout=60,graceful=True,doc_ops=create:update:expiry,replicas=0,GROUP=P2;graceful
    test_crash_during_ops,num_items=30000000,doc_size=1024,sdk_timeout=60,graceful=True,doc_ops=create:delete:expiry,replicas=0,GROUP=P2;graceful
    test_crash_during_ops,num_items=30000000,doc_size=1024,sdk_timeout=60,graceful=True,doc_ops=update:delete:expiry,replicas=0,GROUP=P2;graceful
    test_crash_during_ops,num_items=30000000,doc_size=1024,sdk_timeout=60,graceful=True,doc_ops=create:update:delete:expiry,replicas=0,GROUP=P2;graceful
    test_crash_before_upserts,num_items=7000000,sdk_timeout=60,test_itr=3,graceful=True,GROUP=P2;graceful
    test_crash_before_multi_update_deletes,num_items=7000000,sdk_timeout=60,test_itr=2,graceful=True,update_itr=2,GROUP=P2;graceful

    # Replicas
    test_crash_during_ops,num_items=5000000,doc_size=1024,sdk_timeout=60,graceful=True,doc_ops=create,replicas=1,GROUP=P0;replica;graceful
    test_crash_during_ops,num_items=20000000,doc_size=1024,sdk_timeout=60,graceful=True,doc_ops=update,replicas=1,GROUP=P0;replica;graceful
    test_crash_during_ops,num_items=20000000,doc_size=1024,sdk_timeout=60,graceful=True,doc_ops=delete,replicas=1,GROUP=P0;replica;graceful
    test_crash_during_ops,num_items=20000000,doc_size=1024,sdk_timeout=60,graceful=True,doc_ops=expiry,replicas=1,GROUP=P0;replica;graceful
    test_crash_during_get_ops,num_items=7000000,sdk_timeout=60,deep_copy=True,graceful=True,read_thread_count=8,replicas=1,GROUP=P0;replica;graceful
    test_crash_during_upserts_using_multithreads,num_items=7000000,sdk_timeout=60,graceful=True,read_thread_count=8,replicas=1,GROUP=P0;replica;graceful

    test_crash_during_ops,num_items=5000000,doc_size=1024,sdk_timeout=60,graceful=True,doc_ops=create:update,replicas=1,GROUP=P1;replica;graceful
    test_crash_during_ops,num_items=20000000,doc_size=1024,sdk_timeout=60,graceful=True,doc_ops=create:delete,replicas=1,GROUP=P1;replica;graceful
    test_crash_during_ops,num_items=20000000,doc_size=1024,sdk_timeout=60,graceful=True,doc_ops=update:delete,replicas=1,GROUP=P1;replica;graceful
    test_crash_during_ops,num_items=10000000,doc_size=1024,sdk_timeout=60,graceful=True,doc_ops=create:expiry,replicas=1,GROUP=P1;replica;graceful
    test_crash_during_ops,num_items=20000000,doc_size=1024,sdk_timeout=60,graceful=True,doc_ops=update:expiry,replicas=1,GROUP=P1;replica;graceful
    test_crash_during_ops,num_items=20000000,doc_size=1024,sdk_timeout=60,graceful=True,doc_ops=delete:expiry,replicas=1,GROUP=P1;replica;graceful
    test_crash_during_multi_updates_of_single_doc,num_items=7000000,sdk_timeout=60,graceful=True,replicas=1,GROUP=P1;replica;graceful

    test_crash_during_ops,num_items=20000000,doc_size=1024,sdk_timeout=60,graceful=True,doc_ops=create:update:delete,replicas=1,GROUP=P2;replica;graceful
    test_crash_during_ops,num_items=30000000,doc_size=1024,sdk_timeout=60,graceful=True,doc_ops=create:update:expiry,replicas=1,GROUP=P2;replica;graceful
    test_crash_during_ops,num_items=30000000,doc_size=1024,sdk_timeout=60,graceful=True,doc_ops=create:delete:expiry,replicas=1,GROUP=P2;replica;graceful
    test_crash_during_ops,num_items=30000000,doc_size=1024,sdk_timeout=60,graceful=True,doc_ops=update:delete:expiry,replicas=1,GROUP=P2;replica;graceful
    test_crash_during_ops,num_items=30000000,doc_size=1024,sdk_timeout=60,graceful=True,doc_ops=create:update:delete:expiry,replicas=0,GROUP=P2;graceful
    test_crash_before_upserts,num_items=4000000,sdk_timeout=60,test_itr=3,replicas=1,graceful=True,GROUP=P2;replica;graceful
    test_crash_before_multi_update_deletes,num_items=4000000,sdk_timeout=60,test_itr=2,graceful=True,update_itr=2,replicas=1,GROUP=P2;replica;graceful

    # SIGKIll
    test_crash_during_ops,num_items=5000000,doc_size=1024,sdk_timeout=60,graceful=False,doc_ops=create,replicas=0,GROUP=P0;kill
    test_crash_during_ops,num_items=20000000,doc_size=1024,sdk_timeout=60,graceful=False,doc_ops=update,replicas=0,GROUP=P0;kill
    test_crash_during_ops,num_items=20000000,doc_size=1024,sdk_timeout=60,graceful=False,doc_ops=delete,replicas=0,GROUP=P0;kill
    test_crash_during_ops,num_items=20000000,doc_size=1024,sdk_timeout=60,graceful=False,doc_ops=expiry,replicas=0,GROUP=P0;kill
    test_crash_during_get_ops,num_items=7000000,sdk_timeout=60,deep_copy=True,read_thread_count=8,GROUP=P0;kill
    test_crash_during_upserts_using_multithreads,num_items=7000000,sdk_timeout=60,read_thread_count=8,GROUP=P0;kill

    test_crash_during_ops,num_items=5000000,doc_size=1024,sdk_timeout=60,graceful=False,doc_ops=create:update,replicas=0,GROUP=P1;kill
    test_crash_during_ops,num_items=20000000,doc_size=1024,sdk_timeout=60,graceful=False,doc_ops=create:delete,replicas=0,GROUP=P1;kill
    test_crash_during_ops,num_items=20000000,doc_size=1024,sdk_timeout=60,graceful=False,doc_ops=update:delete,replicas=0,GROUP=P1;kill
    test_crash_during_ops,num_items=10000000,doc_size=1024,sdk_timeout=60,graceful=False,doc_ops=create:expiry,replicas=0,GROUP=P1;kill
    test_crash_during_ops,num_items=20000000,doc_size=1024,sdk_timeout=60,graceful=False,doc_ops=update:expiry,replicas=0,GROUP=P1;kill
    test_crash_during_ops,num_items=20000000,doc_size=1024,sdk_timeout=60,graceful=False,doc_ops=delete:expiry,replicas=0,GROUP=P1;kill
    test_crash_during_multi_updates_of_single_doc,num_items=7000000,sdk_timeout=60,GROUP=P1;kill
    test_crash_during_val_movement_across_trees,num_items=7000000,sdk_timeout=60,graceful=False,GROUP=P1;kill

    test_crash_during_ops,num_items=20000000,doc_size=1024,sdk_timeout=60,graceful=False,doc_ops=create:update:delete,replicas=0,GROUP=P2;kill
    test_crash_during_ops,num_items=30000000,doc_size=1024,sdk_timeout=60,graceful=False,doc_ops=create:update:expiry,replicas=0,GROUP=P2;kill
    test_crash_during_ops,num_items=30000000,doc_size=1024,sdk_timeout=60,graceful=False,doc_ops=create:delete:expiry,replicas=0,GROUP=P2;kill
    test_crash_during_ops,num_items=30000000,doc_size=1024,sdk_timeout=60,graceful=False,doc_ops=update:delete:expiry,replicas=0,GROUP=P2;kill
    test_crash_during_ops,num_items=30000000,doc_size=1024,sdk_timeout=60,graceful=False,doc_ops=create:update:delete:expiry,replicas=0,GROUP=P2;kill
    test_crash_before_upserts,num_items=7000000,sdk_timeout=60,test_itr=3,GROUP=P2;kill
    test_crash_before_multi_update_deletes,num_items=7000000,sdk_timeout=60,test_itr=2,update_itr=2,GROUP=P2;kill

    # Replicas
    test_crash_during_ops,num_items=5000000,doc_size=1024,sdk_timeout=60,graceful=False,doc_ops=create,replicas=1,GROUP=P0;replica;kill
    test_crash_during_ops,num_items=20000000,doc_size=1024,sdk_timeout=60,graceful=False,doc_ops=update,replicas=1,GROUP=P0;replica;kill
    test_crash_during_ops,num_items=20000000,doc_size=1024,sdk_timeout=60,graceful=False,doc_ops=delete,replicas=1,GROUP=P0;replica;kill
    test_crash_during_ops,num_items=20000000,doc_size=1024,sdk_timeout=60,graceful=False,doc_ops=expiry,replicas=1,GROUP=P0;replica;kill
    test_crash_during_get_ops,num_items=7000000,sdk_timeout=60,deep_copy=True,read_thread_count=8,replicas=1,GROUP=P0;replica;kill
    test_crash_during_upserts_using_multithreads,num_items=7000000,sdk_timeout=60,read_thread_count=8,replicas=1,GROUP=P0;replica;kill

    test_crash_during_ops,num_items=5000000,doc_size=1024,sdk_timeout=60,graceful=False,doc_ops=create:update,replicas=1,GROUP=P1;replica;kill
    test_crash_during_ops,num_items=20000000,doc_size=1024,sdk_timeout=60,graceful=False,doc_ops=create:delete,replicas=1,GROUP=P1;replica;kill
    test_crash_during_ops,num_items=20000000,doc_size=1024,sdk_timeout=60,graceful=False,doc_ops=update:delete,replicas=1,GROUP=P1;replica;kill
    test_crash_during_ops,num_items=10000000,doc_size=1024,sdk_timeout=60,graceful=False,doc_ops=create:expiry,replicas=1,GROUP=P1;replica;kill
    test_crash_during_ops,num_items=20000000,doc_size=1024,sdk_timeout=60,graceful=False,doc_ops=update:expiry,replicas=1,GROUP=P1;replica;kill
    test_crash_during_ops,num_items=20000000,doc_size=1024,sdk_timeout=60,graceful=False,doc_ops=delete:expiry,replicas=1,GROUP=P1;replica;kill
    test_crash_during_multi_updates_of_single_doc,num_items=7000000,sdk_timeout=60,replicas=1,GROUP=P1;replica;kill

    test_crash_during_ops,num_items=20000000,doc_size=1024,sdk_timeout=60,graceful=False,doc_ops=create:update:delete,replicas=1,GROUP=P2;replica;kill
    test_crash_during_ops,num_items=30000000,doc_size=1024,sdk_timeout=60,graceful=False,doc_ops=create:update:expiry,replicas=1,GROUP=P2;replica;kill
    test_crash_during_ops,num_items=30000000,doc_size=1024,sdk_timeout=60,graceful=False,doc_ops=create:delete:expiry,replicas=1,GROUP=P2;replica;kill
    test_crash_during_ops,num_items=30000000,doc_size=1024,sdk_timeout=60,graceful=False,doc_ops=update:delete:expiry,replicas=1,GROUP=P2;replica;kill
    test_crash_during_ops,num_items=30000000,doc_size=1024,sdk_timeout=60,graceful=False,doc_ops=create:update:delete:expiry,replicas=1,GROUP=P2;replica;kill
    test_crash_before_upserts,num_items=4000000,sdk_timeout=60,test_itr=3,replicas=1,GROUP=P2;replica;kill
    test_crash_before_multi_update_deletes,num_items=4000000,sdk_timeout=60,test_itr=2,update_itr=2,replicas=1,GROUP=P2;replica;kill

    # Crash during recovery
    test_crash_during_recovery,num_items=15000000,doc_size=1024,sdk_timeout=60,doc_ops=create:update:delete:expiry,replicas=0,GROUP=P0;recovery
    test_crash_during_recovery,num_items=5000000,doc_size=1024,sdk_timeout=60,doc_ops=create,replicas=0,GROUP=P0;recovery
    test_crash_during_recovery,num_items=10000000,doc_size=1024,sdk_timeout=60,doc_ops=update,replicas=0,GROUP=P0;recovery
    test_crash_during_recovery,num_items=10000000,doc_size=1024,sdk_timeout=60,doc_ops=delete,replicas=0,GROUP=P0;recovery
    test_crash_during_recovery,num_items=10000000,doc_size=1024,sdk_timeout=60,doc_ops=expiry,replicas=0,GROUP=P0;recovery

    test_crash_during_recovery,num_items=5000000,doc_size=1024,sdk_timeout=60,doc_ops=create:delete,replicas=0,GROUP=P1;recovery
    test_crash_during_recovery,num_items=5000000,doc_size=1024,sdk_timeout=60,doc_ops=create:update,replicas=0,GROUP=P1;recovery
    test_crash_during_recovery,num_items=5000000,doc_size=1024,sdk_timeout=60,doc_ops=create:expiry,replicas=0,GROUP=P1;recovery
    test_crash_during_recovery,num_items=10000000,doc_size=1024,sdk_timeout=60,doc_ops=update:expiry,replicas=0,GROUP=P1;recovery
    test_crash_during_recovery,num_items=10000000,doc_size=1024,sdk_timeout=60,doc_ops=delete:expiry,replicas=0,GROUP=P1;recovery
    test_crash_during_recovery,num_items=10000000,doc_size=1024,sdk_timeout=60,doc_ops=update:delete,replicas=0,GROUP=P1;recovery

    test_crash_during_recovery,num_items=10000000,doc_size=1024,sdk_timeout=60,doc_ops=crete:update:delete,replicas=0,GROUP=P2;recovery
    test_crash_during_recovery,num_items=10000000,doc_size=1024,sdk_timeout=60,doc_ops=crete:update:expiry,replicas=0,GROUP=P2;recovery
    test_crash_during_recovery,num_items=10000000,doc_size=1024,sdk_timeout=60,doc_ops=crete:delete:expiry,replicas=0,GROUP=P2;recovery
    test_crash_during_recovery,num_items=15000000,doc_size=1024,sdk_timeout=60,doc_ops=update:delete:expiry,replicas=0,GROUP=P2;recovery

    test_crash_during_recovery,num_items=15000000,doc_size=1024,sdk_timeout=60,doc_ops=create:update:delete:expiry,replicas=1,GROUP=P0;replicas;recovery
    test_crash_during_recovery,num_items=5000000,doc_size=1024,sdk_timeout=60,doc_ops=create,replicas=1,GROUP=P0;replicas;recovery
    test_crash_during_recovery,num_items=10000000,doc_size=1024,sdk_timeout=60,doc_ops=update,replicas=1,GROUP=P0;replicas;recovery
    test_crash_during_recovery,num_items=10000000,doc_size=1024,sdk_timeout=60,doc_ops=delete,replicas=1,GROUP=P0;replicas;recovery
    test_crash_during_recovery,num_items=10000000,doc_size=1024,sdk_timeout=60,doc_ops=expiry,replicas=1,GROUP=P0;replicas;recovery

    test_crash_during_recovery,num_items=5000000,doc_size=1024,sdk_timeout=60,doc_ops=create:delete,replicas=1,GROUP=P1;replicas;recovery
    test_crash_during_recovery,num_items=5000000,doc_size=1024,sdk_timeout=60,doc_ops=create:update,replicas=1,GROUP=P1;replicas;recovery
    test_crash_during_recovery,num_items=5000000,doc_size=1024,sdk_timeout=60,doc_ops=create:expiry,replicas=1,GROUP=P1;replicas;recovery
    test_crash_during_recovery,num_items=10000000,doc_size=1024,sdk_timeout=60,doc_ops=update:expiry,replicas=1,GROUP=P1;replicas;recovery
    test_crash_during_recovery,num_items=10000000,doc_size=1024,sdk_timeout=60,doc_ops=delete:expiry,replicas=1,GROUP=P1;replicas;recovery
    test_crash_during_recovery,num_items=10000000,doc_size=1024,sdk_timeout=60,doc_ops=update:delete,replicas=1,GROUP=P1;replicas;recovery

    test_crash_during_recovery,num_items=10000000,doc_size=1024,sdk_timeout=60,doc_ops=crete:update:delete,replicas=1,GROUP=P2;replicas;recovery
    test_crash_during_recovery,num_items=10000000,doc_size=1024,sdk_timeout=60,doc_ops=crete:update:expiry,replicas=1,GROUP=P2;replicas;recovery
    test_crash_during_recovery,num_items=10000000,doc_size=1024,sdk_timeout=60,doc_ops=crete:delete:expiry,replicas=1,GROUP=P2;replicas;recovery
    test_crash_during_recovery,num_items=15000000,doc_size=1024,sdk_timeout=60,doc_ops=update:delete:expiry,replicas=1,GROUP=P2;replicas;recovery

    #################### Cases with Durability(SIGKILL) ############################
    test_crash_during_ops,num_items=10000000,doc_size=1024,sdk_timeout=60,graceful=False,doc_ops=create:update:delete:expiry,replicas=2,durability=MAJORITY,GROUP=P0;durability
    test_crash_during_recovery,num_items=10000000,doc_size=1024,sdk_timeout=60,doc_ops=update:delete:expiry,replicas=2,,durability=MAJORITY,GROUP=P0;durability
    test_crash_during_ops,num_items=10000000,doc_size=1024,sdk_timeout=60,graceful=False,doc_ops=create:update:delete:expiry,replicas=2,durability=PERSIST_TO_MAJORITY,GROUP=P0;durability
    test_crash_during_recovery,num_items=10000000,doc_size=1024,sdk_timeout=60,doc_ops=update:delete:expiry,replicas=2,,durability=PERSIST_TO_MAJORITY,GROUP=P0;durability
    test_crash_during_ops,num_items=10000000,doc_size=1024,sdk_timeout=60,graceful=False,doc_ops=create:update:delete:expiry,replicas=2,durability=MAJORITY_AND_PERSIST_TO_ACTIVE,GROUP=P0;durability
    test_crash_during_recovery,num_items=10000000,doc_size=1024,sdk_timeout=60,doc_ops=update:delete:expiry,replicas=2,,durability=MAJORITY_AND_PERSIST_TO_ACTIVE,GROUP=P0;durability

    #################### Cases with Durability(GRACEFULL) ############################
    test_crash_during_ops,num_items=10000000,doc_size=1024,graceful=True,sdk_timeout=60,graceful=False,doc_ops=create:update:delete:expiry,replicas=2,durability=MAJORITY,GROUP=P0;grace_durability
    test_crash_during_recovery,num_items=10000000,doc_size=1024,graceful=True,sdk_timeout=60,doc_ops=update:delete:expiry,replicas=2,,durability=MAJORITY,GROUP=P0;grace_durability
    test_crash_during_ops,num_items=10000000,doc_size=1024,sdk_timeout=60,graceful=True,doc_ops=create:update:delete:expiry,replicas=2,durability=PERSIST_TO_MAJORITY,GROUP=P0;grace_durability
    test_crash_during_recovery,num_items=10000000,doc_size=1024,graceful=True,sdk_timeout=60,doc_ops=update:delete:expiry,replicas=2,,durability=PERSIST_TO_MAJORITY,GROUP=P0;grace_durability
    test_crash_during_ops,num_items=10000000,doc_size=1024,sdk_timeout=60,graceful=True,doc_ops=create:update:delete:expiry,replicas=2,durability=MAJORITY_AND_PERSIST_TO_ACTIVE,GROUP=P0;grace_durability
    test_crash_during_recovery,num_items=10000000,doc_size=1024,graceful=True,sdk_timeout=60,doc_ops=update:delete:expiry,replicas=2,,durability=MAJORITY_AND_PERSIST_TO_ACTIVE,GROUP=P0;grace_durability
